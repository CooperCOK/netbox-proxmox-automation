  - name: Tell us about 'proxmox_vm_interfaces'
    debug:
      msg: "proxmox_vm_interfaces {{ proxmox_vm_interfaces }}"

  - name: Tell us about Proxmox VMs
    set_fact:
      #proxmox_vm_create: "{{ proxmox_vm_create|default([]) + [{'name': item.name, 'template': item.template, 'vcpus': item.vcpus, 'memory': item.memory, 'disk0': item.disk0, 'disk': item.disk, 'sshkey': item.sshkey}] }}"
      proxmox_vm_create: "{{ proxmox_vm_create|default([]) + [item] }}"
    loop: "{{ proxmox_vm_cfg.vms }}"
    when: item.exists

  - name: Tell us about Network Interfaces
    set_fact:
      proxmox_vm_interfaces: "{{ proxmox_vm_interfaces|default([]) + [{'name': item[0].name, 'interface': item[1]['name'], 'prefix': item[1]['prefix']}] }}"
    loop: "{{ proxmox_vm_cfg.vms | subelements('network_interfaces') }}"
    when: item[0].exists
    register: whatever

  - name: Tell us about 'proxmox_vm_interfaces' AGAIN
    debug:
      msg: "proxmox_vm stuff AGAIN {{ proxmox_vm_create }} |||| {{ proxmox_vm_interfaces }}"
