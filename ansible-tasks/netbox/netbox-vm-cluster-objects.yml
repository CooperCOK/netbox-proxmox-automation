  - name: Create default Proxmox VM role in NetBox
    netbox.netbox.netbox_device_role:
      netbox_url: "{{ secrets_cfg.netbox.api_proto }}://{{ secrets_cfg.netbox.api_host }}:{{ secrets_cfg.netbox.api_port}}"
      netbox_token: "{{ secrets_cfg.netbox.api_token }}"
      data:
        name: "{{ proxmox_vm_cfg.default_vm_device_role }}"
        color: FFBF00
      state: present

  - name: Create Proxmox cluster type in NetBox
    netbox.netbox.netbox_cluster_type:
      netbox_url: "{{ secrets_cfg.netbox.api_proto }}://{{ secrets_cfg.netbox.api_host }}:{{ secrets_cfg.netbox.api_port}}"
      netbox_token: "{{ secrets_cfg.netbox.api_token }}"
      data:
        name: "{{ proxmox_vm_cfg.default_vm_cluster_type }}"
      state: present

  - name: Create cluster group in NetBox
    netbox.netbox.netbox_cluster_group:
      netbox_url: "{{ secrets_cfg.netbox.api_proto }}://{{ secrets_cfg.netbox.api_host }}:{{ secrets_cfg.netbox.api_port}}"
      netbox_token: "{{ secrets_cfg.netbox.api_token }}"
      data:
        name: "{{ proxmox_vm_cfg.default_vm_cluster_group }}"
      state: present

  - name: Create Proxmox cluster in NetBox
    netbox.netbox.netbox_cluster:
      netbox_url: "{{ secrets_cfg.netbox.api_proto }}://{{ secrets_cfg.netbox.api_host }}:{{ secrets_cfg.netbox.api_port}}"
      netbox_token: "{{ secrets_cfg.netbox.api_token }}"
      data:
        name: "{{ proxmox_vm_cfg.default_vm_cluster }}"
        cluster_type: "{{ proxmox_vm_cfg.default_vm_cluster_type }}"
        cluster_group: "{{ proxmox_vm_cfg.default_vm_cluster_group }}"
      state: present
